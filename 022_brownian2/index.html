<html>
    <head>
        <title>brownian 2</title>
        <link rel="stylesheet" type="text/css" href="../css/styles.css"/>
    </head>
    <body>
        <script type="text/javascript" src="../libs/tools.js"></script>
        <script type="text/javascript">
         var stage = new tools.Stage(700, 700);

         var pts = [];
         var n = 100;
         var fr = 0.9;
         var v = 1;

         for(var i = 0; i < n; i++){
             pts[i] = {
                 x:0.5 * stage.width,
                 y:0.5 * stage.height,
                 vx:0, vy:0
             };
         }

         stage.out.strokeStyle = "black";

         function update(){
             stage.out.beginPath();
             for(var i = 0; i < n; i++){
                 var pt = pts[i];
                 stage.out.moveTo(pt.x, pt.y);
                 pt.vx = fr * pt.vx + v * (Math.random() * 2 - 1);
                 pt.vy = fr * pt.vy + v * (Math.random() * 2 - 1);
                 pt.x += pt.vx;
                 pt.y += pt.vy;
                 if(pt.x < 0){
                     pt.x = 0;
                     pt.vx *= -1;
                 }
                 else if(pt.x > stage.width){
                     pt.x = stage.width;
                     pt.vx *= -1;
                 }
                 if(pt.y < 0){
                     pt.y = 0;
                     pt.vy *= -1;
                 }
                 else if(pt.y > stage.height){
                     pt.y = stage.height;
                     pt.vy *= -1;
                 }
                 stage.out.lineTo(pt.x, pt.y);
             }
             stage.out.stroke();
             stage.out.closePath();
         }

         new tools.Loop(update, this);
        </script>
    </body>
</html>
