<html>
    <head>
        <title>Stars</title>
        <link rel="stylesheet" type="text/css" href="../css/styles.css"/>
    </head>
    <body>
        <script type="text/javascript" src="../libs/tools.js"></script>
        <script type="text/javascript">
         tools.mixin(tools, this);

         var w = 700;
         var h = 700;
         var stage = new tools.Stage(w, h);
         var out = stage.out;


         var pts = [];
         var n = 2000;
         for(var i = 0; i < n; i++){
             var pt = {x:Math.random() * w, y:Math.random() * h};
             pt.color = Math.random() * 100;
             pt.size = Math.pow(Math.random(), 2) * 7;
             pt.offset = Math.random() * 2 * Math.PI;
             pt.timeScale = Math.random() * 5 + 2;
             pts[i] = pt;
         }

         new Loop(function(){
                 var time = Date.now() * 0.001;
                 out.fillStyle = "black";
                 out.fillRect(0, 0, w , h);
                 for(var i = 0; i < n; i++){
                     pt = pts[i];

                     var ratio = 0.5 * (Math.cos(pt.timeScale * time + pt.offset) + 1);
                     out.fillStyle = "hsl(0, 0%, " + (Math.round(ratio * pt.color)) + "%)";
                     var size = pt.size * ratio;
                     out.fillRect(pt.x - 0.5 * size, pt.y - 0.5 * size, size, size);
                 }
         })</script>

    </body>
</html>
