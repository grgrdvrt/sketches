<html>
    <head>
        <title>Wave</title>
        <link rel="stylesheet" type="text/css" href="../css/styles.css"/>
    </head>
    <body>
        <script type="text/javascript" src="../libs/tools.js"></script>
        <script type="text/javascript">
         tools.mixin(tools, this);

         var w = 700;
         var h = 700;
         var stage = new Stage(w, h);
         var out = stage.out;
         var n = 10 + Math.floor(Math.random() * 50);
         out.fillStyle = "black";

         var sines = [];
         var nSines = 15;
         var t0 = Date.now();

         for(var i = 0; i < nSines; i++){
             sines[i] = {scale:Math.random() * 10,
                         frequ:12 * (Math.random() * 2 - 1),
                         speed:Math.random() * 0.01};
         }
         new Loop(function(){
                 out.clearRect(0, 0, w, h);
                 var time = Date.now() - t0;
                 for(var i = 0; i < n; i++){
                     var value = 0;
                     var ratio = i / (n - 1);
                     for(var j = 0; j < nSines; j++){
                         var sine = sines[j];
                         value += sine.scale * Math.sin(time * sine.speed + sine.frequ * ratio);
                     }
                     value *= 2;
                     value += 0.5 * h;
                     out.fillRect(Math.round(w * ratio), Math.ceil(value), Math.floor(w / n - 1), Math.floor(h - value));
                 }
         });</script>

    </body>
</html>
