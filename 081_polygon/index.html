<html>
    <head>
        <title>Polygon</title>
        <link rel="stylesheet" type="text/css" href="../css/styles.css"/>
    </head>
    <body>
        <script type="text/javascript" src="../libs/tools.js"></script>
        <script type="text/javascript">
         tools.mixin(tools, this);
         var stage = new tools.Stage(700, 700);
         var out = stage.out;
         out.strokeStyle = "black";


         var nSides = Math.floor(Math.random() * 5) + 3;
         var radius = 0.4 * stage.width;
         var x = radius;
         var y = 0;
         var time = 0;
         function update(){
             out.fillStyle = "rgba(255, 255, 255, 0.03)";
             out.fillRect(0, 0, stage.width, stage.height);
             out.save();
             out.translate(0.5 * stage.width, 0.5 * stage.height);
             var t = (0.005 * time) % 1;
             var t2 = t * nSides;
             var t3 = t2 - Math.floor(t2);
             var ratio = 2 * Math.PI / nSides;
             var ang1 = ratio * Math.floor(t2);
             var ang2 = ratio * Math.ceil(t2);
             var x1 = Math.cos(ang1);
             var y1 = Math.sin(ang1);
             var x2 = Math.cos(ang2);
             var y2 = Math.sin(ang2);

             out.beginPath();
             out.moveTo(x, y);
             x = radius * (x1 + t3 * (x2 - x1));
             y = radius * (y1 + t3 * (y2 - y1));

             out.lineTo(x, y);
             out.stroke();
             out.restore();

             time++;
         }

         new Loop(update, this);</script>
    </body>
</html>
