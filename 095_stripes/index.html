<html>
    <head>
        <title>Stripes</title>
        <link rel="stylesheet" type="text/css" href="../css/styles.css"/>
    </head>
    <body>
        <script type="text/javascript" src="../libs/tools.js"></script>
        <script type="text/javascript">
         tools.mixin(tools, this);

         var stage = new Stage(700, 700);
         var out = stage.out;

         var nStripes = 50;
         var stripeWidth = stage.width / nStripes;

         var stripes = [];

         for(var i = 0; i < nStripes; i++){
             var s = {};
             s.x = stripeWidth * Math.floor(nStripes * i) / nStripes;
             resetStripe(s);
             s.y = -Math.floor(Math.random() * stage.height);
             stripes[i] = s;
         }

         new Loop(function(){

             for(var i = 0; i < nStripes; i++){
                 s = stripes[i];
                 out.fillStyle = s.color;
                 out.fillRect(s.x, s.y - s.vel, stripeWidth, s.vel);

                 s.y += s.vel;
                 if(s.y > stage.height + s.vel)
                     resetStripe(s);
             }

         });


         function resetStripe(s){
             s.vel = Math.floor(Math.random() * 8 + 2);
             s.y = 0;
             s.color = "hsl(0, 0%, " + Math.round(Math.random() * 100) + "%)";
         }</script>
    </body>
</html>
